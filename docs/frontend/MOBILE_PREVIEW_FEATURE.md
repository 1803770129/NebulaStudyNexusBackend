# 移动端预览功能说明

## 📱 功能概述

在题目编辑表单中新增了移动端预览功能，可以实时查看题目在手机端和平板端的显示效果。

## ✨ 主要特性

### 1. 富文本框高度优化
- **题目内容**：从 200px 增加到 300px
- **答案解析**：从 150px 增加到 250px
- 提供更舒适的编辑体验

### 2. 移动端预览
- **手机端预览**：375x667 (iPhone SE/8 尺寸)
- **平板端预览**：768x1024 (iPad 尺寸)
- **实时预览**：点击按钮即可查看当前表单内容
- **设备切换**：支持在手机和平板视图间切换

## 🎯 使用方法

### 1. 打开预览

在题目编辑页面，填写题目内容后：

1. 点击表单底部的 **"移动端预览"** 按钮
2. 弹出预览窗口

### 2. 切换设备

在预览窗口顶部：
- 点击 **"手机端"** 查看手机显示效果
- 点击 **"平板端"** 查看平板显示效果

### 3. 预览内容

预览窗口会显示：
- ✅ 题目类型标签（单选题、多选题等）
- ✅ 难度等级标签（简单、中等、困难）
- ✅ 题目标题
- ✅ 题目内容（支持富文本、图片、公式）
- ✅ 选择题选项（带正确答案标识）
- ✅ 参考答案（非选择题）
- ✅ 答案解析（支持富文本、图片、公式）

## 📐 设备尺寸

| 设备类型 | 宽度 | 高度 | 说明 |
|---------|------|------|------|
| 手机端 | 375px | 667px | iPhone SE/8 标准尺寸 |
| 平板端 | 768px | 1024px | iPad 标准尺寸 |

## 🎨 界面特点

### 1. 真实设备模拟
- 圆角边框
- 顶部刘海设计
- 阴影效果
- 滚动条样式

### 2. 题目展示优化
- 清晰的标签分类
- 选项字母标识（A、B、C、D）
- 正确答案高亮显示
- 图片自适应缩放
- 公式正常渲染

### 3. 交互体验
- 选项悬停效果
- 平滑滚动
- 响应式布局

## 💡 使用场景

### 1. 题目创建时
- 实时查看题目在移动端的显示效果
- 确保内容排版合理
- 检查图片大小是否合适

### 2. 题目编辑时
- 修改后立即预览
- 对比不同设备的显示效果
- 优化移动端阅读体验

### 3. 质量检查
- 检查选项是否清晰
- 验证公式渲染效果
- 确认图片加载正常

## 🔧 技术实现

### 组件结构

```
QuestionForm (题目表单)
  ├── RichTextEditor (富文本编辑器 - 增加高度)
  ├── 预览按钮
  └── MobilePreview (移动端预览组件)
       ├── 设备切换器
       └── 预览容器
            ├── 题目头部
            ├── 题目内容
            ├── 选项列表
            └── 答案解析
```

### 核心文件

```
question-managing/src/components/question/
├── QuestionForm.tsx          # 题目表单（已修改）
├── MobilePreview.tsx         # 移动端预览组件（新增）
└── MobilePreview.css         # 预览样式（新增）
```

## 📝 代码示例

### 使用预览组件

```typescript
import { MobilePreview } from '@/components/question/MobilePreview';

function MyComponent() {
  const [previewVisible, setPreviewVisible] = useState(false);
  const [form] = Form.useForm();

  return (
    <>
      <Button onClick={() => setPreviewVisible(true)}>
        预览
      </Button>

      <MobilePreview
        visible={previewVisible}
        onClose={() => setPreviewVisible(false)}
        formValues={form.getFieldsValue()}
      />
    </>
  );
}
```

### 表单值格式

```typescript
interface QuestionFormValues {
  title: string;              // 题目标题
  content: string;            // 题目内容（HTML）
  type: QuestionType;         // 题目类型
  difficulty: DifficultyLevel; // 难度等级
  options?: FormOption[];     // 选项（选择题）
  answer?: string | string[]; // 答案
  explanation?: string;       // 解析（HTML）
}
```

## 🎯 最佳实践

### 1. 内容编写建议

**题目内容：**
- 保持简洁明了
- 图片不要过大（建议 < 500KB）
- 公式使用 LaTeX 语法
- 避免过长的段落

**选项内容：**
- 每个选项独立完整
- 长度尽量一致
- 避免使用过大的图片

**答案解析：**
- 分步骤说明
- 配图辅助理解
- 突出关键点

### 2. 预览检查清单

- [ ] 题目内容完整显示
- [ ] 图片大小合适
- [ ] 公式渲染正常
- [ ] 选项排列整齐
- [ ] 正确答案标识清晰
- [ ] 解析内容易读
- [ ] 手机端显示正常
- [ ] 平板端显示正常

### 3. 性能优化

**图片优化：**
```typescript
// 上传前压缩图片
import { uploadImage } from '@/services/uploadService';

// 建议尺寸
const MAX_WIDTH = 800;  // 最大宽度
const MAX_HEIGHT = 600; // 最大高度
const QUALITY = 0.8;    // 压缩质量
```

**内容长度：**
- 题目内容：建议 < 500 字
- 选项内容：建议 < 100 字
- 答案解析：建议 < 1000 字

## 🐛 常见问题

### Q1: 预览窗口显示空白？

**原因：** 表单内容未填写

**解决：** 至少填写题目标题或内容后再预览

### Q2: 图片在预览中不显示？

**原因：** 
1. 图片还在上传中
2. 图片 URL 无效
3. CDN 缓存未生效

**解决：**
1. 等待上传完成
2. 检查图片 URL
3. 等待 1-5 分钟后刷新

### Q3: 公式显示异常？

**原因：** LaTeX 语法错误

**解决：** 检查公式语法，使用 `$...$` 或 `$$...$$` 包裹

### Q4: 预览窗口太小？

**解决：** 
- 手机端：375px 宽度是标准尺寸
- 平板端：切换到平板视图
- 可以滚动查看完整内容

### Q5: 选项显示不全？

**原因：** 选项内容过长

**解决：** 
- 精简选项文字
- 使用换行分段
- 考虑使用图片替代长文字

## 📊 效果对比

### 修改前
```
题目内容编辑器：200px 高度
答案解析编辑器：150px 高度
无移动端预览功能
```

### 修改后
```
题目内容编辑器：300px 高度 ✅ (+50%)
答案解析编辑器：250px 高度 ✅ (+67%)
移动端预览功能：支持手机/平板 ✅
```

## 🎨 样式定制

如需自定义预览样式，编辑 `MobilePreview.css`：

```css
/* 修改设备边框 */
.mobile-preview-device {
  border-radius: 20px;  /* 圆角大小 */
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2); /* 阴影 */
}

/* 修改选项样式 */
.option-item {
  padding: 12px;        /* 内边距 */
  border-radius: 8px;   /* 圆角 */
}

/* 修改正确答案高亮 */
.option-item.correct-option {
  border-color: #52c41a;  /* 边框颜色 */
  background: #f6ffed;    /* 背景颜色 */
}
```

## 🚀 未来优化

### 计划中的功能
- [ ] 更多设备尺寸（iPhone 14 Pro Max、iPad Pro）
- [ ] 横屏预览模式
- [ ] 暗黑模式预览
- [ ] 导出预览截图
- [ ] 分享预览链接
- [ ] 多题目批量预览

## 📚 相关文档

- [富文本编辑器使用](./RICH_TEXT_EDITOR.md)
- [图片上传功能](./GITHUB_IMAGE_INTEGRATION.md)
- [题目表单组件](../../src/components/question/QuestionForm.tsx)

---

## 总结

移动端预览功能让你能够：
- ✅ 实时查看题目在移动设备上的显示效果
- ✅ 优化移动端阅读体验
- ✅ 提高题目质量
- ✅ 减少发布后的修改

现在就试试吧！在题目编辑页面点击 **"移动端预览"** 按钮 📱
