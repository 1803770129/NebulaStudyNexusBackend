# 刷题系统增强 PRD（全等级）

## 1. 文档信息

- 文档版本：v1.0
- 创建日期：2026-02-21
- 适用项目：`question-backend`、`question-managing`、学生端（小程序/App/H5）
- 目标读者：产品、后端、前端、测试、运营、运维
- 关联文档：
  - `docs/features/practice-system/02-PRODUCT-DELIVERY.md`
  - `docs/features/practice-system/03-TECH-ARCHITECTURE.md`
  - `docs/features/practice-system/04-TASK-BACKLOG.md`

## 2. 背景与问题

当前系统已具备题库、提交判题、收藏、错题本、做题记录和基础统计能力，但仍存在以下业务短板：

1. 只有“单题提交”，缺少“完整练习会话”与学习过程管理。
2. 简答题无法形成批改闭环，学习反馈不完整。
3. 错题本以收集为主，缺少复习计划和调度机制。
4. 缺少模拟考试能力，无法支撑阶段性测评。
5. 运营抓手不足，目标打卡、推荐、提醒、周报等能力缺失。

## 3. 产品目标

## 3.1 北极星目标

将系统从“题库工具”升级为“学习闭环系统”，提升学习效率和留存。

## 3.2 业务指标

| 指标 | 说明 | 目标值 | 统计口径 |
|---|---|---|---|
| 7日留存率 | 学生首次活跃后第7日再次活跃比例 | +8%（上线后8周） | `active_students_d7` |
| 人均日答题数 | 日活学生平均提交题数 | +25%（上线后6周） | `practice_records` |
| 错题二次正确率 | 错题首次复习答对比例 | +20%（上线后8周） | 复习队列记录 |
| 简答题反馈时效 | 提交到批改完成中位时长 | <24小时 | 批改任务 |
| 模拟考试完成率 | 开始考试后成功交卷比例 | >85% | 考试记录 |

## 4. 用户角色

| 角色 | 核心诉求 | 主要动作 |
|---|---|---|
| 学生 | 高效刷题、明确进步、及时反馈 | 练习、复习、考试、查看报告 |
| 教研/老师 | 快速批改、跟踪学习质量 | 批改简答、查看班级表现 |
| 管理员 | 保障系统可运营、可监控 | 配置策略、监控指标、处理异常 |

## 5. 需求等级定义

| 等级 | 定义 | 交付要求 |
|---|---|---|
| P0 | 必须上线，构成学习闭环主链路 | 不可延期 |
| P1 | 重要增强，驱动留存和效率提升 | 可分批上线 |
| P2 | 运营和增长能力 | 依赖 P0/P1 数据基础 |
| P3 | 创新探索能力 | 在稳定后迭代 |

## 6. 全等级功能总览

| 需求ID | 等级 | 功能 | 用户价值 |
|---|---|---|---|
| P0-R01 | P0 | 练习会话与刷题模式 | 从“单题”升级为“会话化学习” |
| P0-R02 | P0 | 简答题人工批改工作台 | 主观题形成反馈闭环 |
| P0-R03 | P0 | 错题复习计划（SRS） | 提升纠错效率 |
| P0-R04 | P0 | 模拟考试与成绩报告 | 支持阶段性测评 |
| P1-R01 | P1 | 学习目标与连续打卡 | 提升日活和坚持度 |
| P1-R02 | P1 | 知识点掌握度看板 | 明确学习短板 |
| P1-R03 | P1 | 弱项推荐练习 | 个性化提效 |
| P1-R04 | P1 | 学习记录增强检索 | 快速定位历史行为 |
| P2-R01 | P2 | 排行榜与班级对比 | 增强竞争和参与感 |
| P2-R02 | P2 | 消息提醒中心 | 提升回访和任务完成率 |
| P2-R03 | P2 | 学习周报（个人/班级） | 支持运营和教学复盘 |
| P3-R01 | P3 | AI错题讲解与追问 | 强化学习反馈深度 |
| P3-R02 | P3 | 自适应策略引擎 | 动态调整出题难度 |

## 7. 详细需求（按等级）

## 7.1 P0 需求

### P0-R01 练习会话与刷题模式

用户故事：
- 作为学生，我希望一次性开始“专项练习/随机练习/错题重练”，系统连续推题并记录完整会话，让我知道本次训练效果。

功能规则：
1. 支持模式：随机练、分类练、知识点练、错题重练。
2. 创建会话时可设置题量、难度范围、题型范围。
3. 会话内每题保存作答结果和耗时。
4. 会话结束生成摘要：答题数、正确率、用时、薄弱知识点。

验收标准：
1. 学生可创建会话并完成连续作答，不刷新页面也不丢状态。
2. 会话中断后可恢复（同账号同设备至少30分钟内恢复）。
3. 会话完成后可查看结构化摘要。

### P0-R02 简答题人工批改工作台

用户故事：
- 作为老师，我希望在待批改列表中快速批改简答题并给出反馈，让学生尽快收到结果。

功能规则：
1. 简答题提交后自动进入“待批改池”。
2. 批改项包含：得分、评语、是否通过、标签（如“关键点缺失”）。
3. 支持批改人筛选、状态筛选、超时筛选。
4. 批改完成后学生端消息中心可见结果。

验收标准：
1. 待批改数据可分页，支持按时间排序。
2. 单条批改结果可追溯（批改人、时间、版本）。
3. 学生可在记录详情看到批改结果。

### P0-R03 错题复习计划（SRS）

用户故事：
- 作为学生，我希望系统告诉我“今天该复习哪些错题”，而不是自己手动翻错题本。

功能规则：
1. 错题自动进入复习队列并计算下次复习时间。
2. 采用分档间隔（示例：1天/3天/7天/15天）机制。
3. 复习答对提高间隔，答错重置或降档。
4. 首页展示“今日待复习数量”与完成进度。

验收标准：
1. 每日0点前生成“今日到期复习清单”。
2. 学生可一键开始“今日复习会话”。
3. 复习行为可回写到学习统计。

### P0-R04 模拟考试与成绩报告

用户故事：
- 作为学生，我希望按时长和分值完成一次模拟考试，并看到总分与分项分析。

功能规则：
1. 支持管理员创建试卷（手动选题和规则组卷）。
2. 学生进入考试后记录开始时间，超时自动交卷。
3. 客观题自动判分，主观题进入人工批改后补全总分。
4. 生成报告：总分、题型得分、知识点得分、错题分布。

验收标准：
1. 考试时长控制准确，超时自动提交。
2. 成绩报告可追溯到每题作答。
3. 批改完成后可更新最终成绩并通知学生。

## 7.2 P1 需求

### P1-R01 学习目标与连续打卡

功能规则：
1. 学生设置每日目标（题量或时长）。
2. 完成目标后自动打卡。
3. 展示连续打卡天数和中断提示。

验收标准：
1. 每日目标可编辑，次日生效。
2. 打卡数据可在统计页和个人页展示。

### P1-R02 知识点掌握度看板

功能规则：
1. 按知识点计算掌握度（近N次正确率 + 最近一次表现权重）。
2. 展示高风险知识点列表。

验收标准：
1. 看板至少支持“全部/近7天/近30天”视图。
2. 掌握度计算规则可配置。

### P1-R03 弱项推荐练习

功能规则：
1. 从低掌握度知识点中自动推荐练习包。
2. 推荐包支持“一键开始练习会话”。

验收标准：
1. 推荐结果可解释（显示推荐原因）。
2. 推荐点击率可追踪。

### P1-R04 学习记录增强检索

功能规则：
1. 做题记录支持按会话、题型、知识点、正确性、时间范围筛选。
2. 支持导出个人学习记录（CSV）。

验收标准：
1. 检索响应时间在 1s 内（95分位，分页首屏）。
2. 导出字段与页面字段一致。

## 7.3 P2 需求

### P2-R01 排行榜与班级对比

功能规则：
1. 榜单维度：日榜、周榜、月榜。
2. 支持班级内排名和全局排名切换。

验收标准：
1. 排名规则可配置（按积分/答题量/正确率）。
2. 支持同分处理规则（并列或按提交时间）。

### P2-R02 消息提醒中心

功能规则：
1. 消息类型：待复习提醒、批改完成、目标未完成提醒、考试通知。
2. 站内消息必须可查历史；站外消息可选（微信订阅/推送）。

验收标准：
1. 消息可标记已读/未读。
2. 消息跳转到具体业务页面。

### P2-R03 学习周报

功能规则：
1. 个人周报：答题量、正确率趋势、进步知识点、待改进项。
2. 班级周报：活跃度分布、平均成绩、风险学生。

验收标准：
1. 周报每周固定时间生成。
2. 可下载 PDF 或导出图片。

## 7.4 P3 需求

### P3-R01 AI错题讲解与追问

功能规则：
1. 对错题自动生成讲解摘要（步骤化）。
2. 支持学生追问同题相关概念。

验收标准：
1. 每次生成保留审计日志（输入、输出、耗时）。
2. 输出可人工反馈“有帮助/无帮助”。

### P3-R02 自适应策略引擎

功能规则：
1. 根据表现动态调整题目难度和知识点分布。
2. 支持策略版本化和A/B实验。

验收标准：
1. 可比较不同策略下的学习效果。
2. 策略可回滚。

## 8. 非功能需求（NFR）

| 类别 | 目标 |
|---|---|
| 性能 | 列表接口 P95 < 500ms；提交判题接口 P95 < 800ms |
| 可用性 | 核心链路（练习、提交、查询）月可用性 >= 99.9% |
| 安全 | 鉴权全覆盖；关键操作审计；敏感字段脱敏 |
| 可靠性 | 提交结果强一致写入；关键任务支持重试 |
| 可观测性 | 关键流程埋点、结构化日志、告警规则完整 |

## 9. 范围边界（Out of Scope）

以下内容不在本轮开发范围：

1. 直播课堂和实时语音答疑。
2. 复杂社交系统（动态、评论流）。
3. 第三方支付体系。
4. 完整 LMS（课程中心、作业中心）重建。

## 10. 发布与验收门槛

1. P0 功能全部通过集成测试和端到端冒烟测试。
2. 关键指标埋点上线并可在监控面板查看。
3. 核心流程具备回滚预案。
4. 运营、客服、测试拿到统一SOP。

