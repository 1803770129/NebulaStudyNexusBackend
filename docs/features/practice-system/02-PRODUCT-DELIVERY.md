# 刷题系统增强产品落地文档

## 1. 文档目标

本文件用于回答“怎么把需求真正上线并跑起来”，覆盖：

1. 分阶段交付范围与节奏。
2. 灰度发布与回滚策略。
3. 运营准备与用户触达。
4. 风险识别与应急预案。
5. Go/No-Go 上线清单。

## 2. 落地原则

1. 先闭环后扩展：优先落 P0 形成稳定学习链路。
2. 先可观测后放量：先打埋点再灰度，不盲目全量。
3. 先稳定后复杂：先规则策略，后智能策略。
4. 所有发布必须可回滚，且回滚后数据不丢失。

## 3. 版本规划

## 3.1 里程碑总览

| 里程碑 | 时间窗口 | 范围 | 发布目标 |
|---|---|---|---|
| M0 准备期 | 第1周 | 埋点、数据基线、开关框架 | 具备灰度能力 |
| M1 P0核心 | 第2-5周 | 会话练习、人工批改、复习计划、模拟考试 | 学习闭环可用 |
| M2 P1增强 | 第6-8周 | 目标打卡、掌握度、弱项推荐、记录检索 | 留存优化 |
| M3 P2运营 | 第9-11周 | 排行榜、提醒中心、周报 | 运营能力上线 |
| M4 P3探索 | 第12周+ | AI讲解、自适应策略 | 小流量实验 |

## 3.2 发布批次

| 批次 | 覆盖人群 | 流量 | 触发条件 |
|---|---|---|---|
| Canary-1 | 内部测试账号 | 1% | 冒烟通过 |
| Canary-2 | 白名单真实用户 | 5% | 关键错误率 < 0.5% |
| Gray | 全站随机用户 | 20%-50% | 指标稳定 72 小时 |
| GA | 全量 | 100% | 运营与技术双签字 |

## 4. 组织分工

| 角色 | 职责 |
|---|---|
| 产品经理 | PRD维护、优先级、验收标准、跨团队协调 |
| 后端负责人 | 数据模型、接口实现、迁移脚本、性能优化 |
| 前端负责人 | 页面流程、交互一致性、埋点接入 |
| 测试负责人 | 用例设计、回归策略、发布质量门禁 |
| 运维负责人 | 发布编排、监控告警、回滚执行 |
| 运营负责人 | 用户教育、活动配置、周报消费 |

## 5. 上线流程

## 5.1 标准流程

1. 需求冻结：每个里程碑开始前冻结版本范围。
2. 开发联调：后端接口冻结后前端联调。
3. 测试验收：功能测试 + 回归 + 性能抽检。
4. 预发布验证：灰度环境验证核心路径。
5. 生产灰度：按批次放量，观察关键指标。
6. 全量发布：达标后全量开关。

## 5.2 发布门禁（必须满足）

| 类别 | 门禁项 |
|---|---|
| 质量门禁 | P0 阻断缺陷为 0，P1高危缺陷为 0 |
| 性能门禁 | 核心接口 P95 达标，错误率可控 |
| 监控门禁 | 指标面板、告警、日志可检索 |
| 数据门禁 | 迁移可回滚，核心表校验通过 |
| 运营门禁 | 用户说明文案、FAQ、客服话术准备完成 |

## 6. 灰度与回滚策略

## 6.1 开关设计

按功能域设置独立开关：

1. `feature.practice_session`
2. `feature.manual_grading`
3. `feature.review_scheduler`
4. `feature.mock_exam`
5. `feature.goal_streak`
6. `feature.recommendation`
7. `feature.leaderboard`
8. `feature.notification_center`

## 6.2 回滚策略

| 场景 | 回滚动作 | 数据处理 |
|---|---|---|
| 功能异常 | 关闭对应开关 | 保留历史数据，停止新写入 |
| 接口错误率飙升 | 回退到上一个稳定版本 | 按迁移脚本反向执行 |
| 批改队列积压 | 降级到仅客观题自动判分 | 保留待批任务，延迟处理 |
| 排行榜异常 | 关闭排行榜读取入口 | 后台重算积分后恢复 |

## 7. 数据与运营准备

## 7.1 数据基线

上线前准备如下看板：

1. DAU、7日留存、人均日答题数。
2. 会话完成率、复习完成率、考试完成率。
3. 简答题批改时长分布。
4. 弱项推荐点击率与转化率。

## 7.2 运营动作

| 阶段 | 运营动作 |
|---|---|
| M1 | 上线公告 + 新功能引导页 + “今日复习”入口强化 |
| M2 | 目标打卡活动（7天挑战） |
| M3 | 周榜活动 + 班级挑战赛 |
| M4 | AI讲解内测招募 |

## 8. 风险与预案

| 风险ID | 风险 | 影响 | 预案 |
|---|---|---|---|
| R-01 | 批改任务激增 | 主观题反馈延迟 | 增加批改池分配规则，支持临时批改组 |
| R-02 | 复习队列计算错误 | 错题调度异常 | 增加每日对账任务，支持一键重算 |
| R-03 | 考试并发高峰 | 提交超时 | 限流 + 异步判分 + 交卷重试 |
| R-04 | 指标埋点缺失 | 无法评估效果 | 以埋点完成为上线门禁 |
| R-05 | 用户认知不足 | 使用率低 | 引导页、任务提示、运营活动组合 |

## 9. 验收机制

## 9.1 功能验收

1. 每个需求项必须有验收用例和验收记录。
2. 验收结论分为：通过、附条件通过、不通过。

## 9.2 数据验收

1. 核心指标可在发布后 T+1 天稳定出数。
2. 指标口径与 PRD 一致。

## 9.3 运营验收

1. 新功能入口曝光率达标。
2. 关键流程转化不低于设定阈值。

## 10. Go/No-Go 清单

发布前必须逐项确认：

1. 功能门禁通过。
2. 性能门禁通过。
3. 安全门禁通过。
4. 回滚演练完成。
5. 运营素材已就绪。
6. 监控告警可用。
7. 负责人完成签字。

## 11. 上线后复盘机制

1. T+1：技术侧复盘（稳定性、错误、性能）。
2. T+7：产品侧复盘（指标变化、路径转化）。
3. T+14：运营侧复盘（活动效果、用户反馈）。
4. 输出下一轮优先级调整建议。

